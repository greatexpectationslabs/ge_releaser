# Validate that any changes to source code result in an updated version
name: "Version Checker"
on:
  push

jobs:
  check:
    runs-on: ubuntu-latest
    steps:
      - id: files
        uses: jitterbit/get-changed-files@v1
      - name: Check that VERSION file is updated
        run: |
          changed_files=${{ steps.files.outputs.all }}
          echo $changed_files
          echo $changed_files | grep "ge_releaser"
          if [ $? -ne 0 ]; then
            exit 0 # No source code changes so exit early
          fi
          echo $changed_files | grep "VERSION"
          if [ $? -ne 0 ]; then
            echo "Please increment the VERSION file in the root of the project."
            exit 1
          fi
